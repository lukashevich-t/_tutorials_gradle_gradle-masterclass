// Closure resolution

class Person {
  String theName = "Tim"
  int age = 30
  Person() {}
  Person(name) {
    this.theName = name
  }
  Closure nameSayer = {
    println theName
  }

  def executeInside(Closure c) {
    println "delegate before: ${c.delegate}"
    c.delegate = this
    c()
    println "delegate after: ${c.delegate}"
  }

  def execute(Closure c) {
    c()
  }
}

def tim = new Person()
tim.nameSayer()
tim.theName = "Timothy"
tim.nameSayer()

String theName = "Fred"
Closure sayName = {
  println theName
}
theName = "Jack"

sayName()
def alex = new Person("Alex")
alex.executeInside(sayName)
alex.executeInside(sayName)
alex.executeInside {println theName}

project.ext.someName = "Oleg"
Closure saySomeName = { println someName }
saySomeName()
alex.executeInside(saySomeName)
alex.execute(saySomeName)


alex.executeInside { println age }
// Integer age = 12
alex.execute { println age }
new Person("Annie").execute(sayName)

